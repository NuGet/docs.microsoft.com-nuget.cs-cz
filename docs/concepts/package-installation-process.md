---
title: Co se stane, když je nainstalován balíček?
description: Podrobné informace o procesu instalace balíčku
author: karann-msft
ms.author: karann
ms.date: 06/20/2019
ms.topic: conceptual
ms.openlocfilehash: 5676239bedb7f8fbe9f74725864afd297405d5c1
ms.sourcegitcommit: 0dea3b153ef823230a9d5f38351b7cef057cb299
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/12/2019
ms.locfileid: "67842331"
---
# <a name="what-happens-when-a-nuget-package-is-installed"></a><span data-ttu-id="10471-103">Co se stane při instalaci balíčku NuGet?</span><span class="sxs-lookup"><span data-stu-id="10471-103">What happens when a NuGet package is installed?</span></span>

<span data-ttu-id="10471-104">Jednoduše ale nutné dodat, jiné nástroje NuGet obvykle vytvořit odkaz na balíček v souboru projektu nebo `packages.config`, proveďte obnovení balíčků, což účinně nainstaluje balíček.</span><span class="sxs-lookup"><span data-stu-id="10471-104">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="10471-105">Výjimkou je `nuget install`, který pouze rozbalí balíček do `packages` složky a nezmění žádné další soubory.</span><span class="sxs-lookup"><span data-stu-id="10471-105">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="10471-106">Obecný postup je následující:</span><span class="sxs-lookup"><span data-stu-id="10471-106">The general process is as follows:</span></span>

1. <span data-ttu-id="10471-107">(Všechny nástroje, s výjimkou `nuget.exe`) identifikátor balíčku a verzi si poznamenejte do souboru projektu nebo `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="10471-107">(All tools except `nuget.exe`) Record the package identifier and version into the project file or `packages.config`.</span></span>

   <span data-ttu-id="10471-108">Pokud je nástroj pro instalaci sady Visual Studio nebo rozhraní příkazového řádku dotnet, nástroj nejdřív pokusí nainstalovat balíček.</span><span class="sxs-lookup"><span data-stu-id="10471-108">If the installation tool is Visual Studio or the dotnet CLI, the tool first attempts to install the package.</span></span> <span data-ttu-id="10471-109">Pokud se jedná o nekompatibilní, balíček není přidán do souboru projektu nebo `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="10471-109">If it's incompatible, the package is not added to the project file or `packages.config`.</span></span>

2. <span data-ttu-id="10471-110">Získejte balíček:</span><span class="sxs-lookup"><span data-stu-id="10471-110">Acquire the package:</span></span>
   - <span data-ttu-id="10471-111">Zkontrolujte, jestli balíček (číslem přesný identifikátor a verzi) je už nainstalovaná v *global-packages* složky, jak je popsáno na [Správa globálních balíčků a složek mezipaměti](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="10471-111">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="10471-112">Pokud balíček není v *global-packages* složky, pokus o načtení z uvedené zdroje podle [konfigurační soubory](../consume-packages/Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="10471-112">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed listed in the [configuration files](../consume-packages/Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="10471-113">Pro online zdroje pokusí nejprve balíček načíst z mezipaměti HTTP, není-li `-NoCache` zadán s parametrem `nuget.exe` příkazy nebo `--no-cache` zadán s parametrem `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="10471-113">For online sources, attempt first to retrieve the package from the HTTP cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="10471-114">(Visual Studio a `dotnet add package` vždy používat mezipaměť.) Pokud je balíček z mezipaměti, se zobrazí ve výstupu "Mezipaměti".</span><span class="sxs-lookup"><span data-stu-id="10471-114">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="10471-115">Mezipaměť obsahuje dobu vypršení platnosti 30 minut.</span><span class="sxs-lookup"><span data-stu-id="10471-115">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="10471-116">Pokud balíček není v mezipaměti protokolu HTTP, pokuste se ho stáhnout z uvedené v konfiguraci zdroje.</span><span class="sxs-lookup"><span data-stu-id="10471-116">If the package is not in the HTTP cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="10471-117">Pokud se stáhne balíček ve výstupu se zobrazí "GET" a "OK".</span><span class="sxs-lookup"><span data-stu-id="10471-117">If a package is downloaded, "GET" and "OK" appear in the output.</span></span> <span data-ttu-id="10471-118">NuGet protokoly provozu http na normální podrobností.</span><span class="sxs-lookup"><span data-stu-id="10471-118">NuGet logs http traffic on normal verbosity.</span></span>

   - <span data-ttu-id="10471-119">Pokud balíček nelze úspěšně získat ze všech zdrojů, instalace se nezdaří v tuto chvíli s chybou jako [NU1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="10471-119">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="10471-120">Poznámka: tuto chyby z `nuget.exe` zobrazit příkazy pouze poslední zdroje zaškrtnuto, ale znamená, že balíček nebyl dostupný z libovolného zdroje.</span><span class="sxs-lookup"><span data-stu-id="10471-120">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="10471-121">Při získávání balíčku, může použít zdroje v konfiguraci Nugetu pořadí:</span><span class="sxs-lookup"><span data-stu-id="10471-121">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="10471-122">NuGet kontroluje zdroje místní složky a síťové sdílené složky, před vrácením zdrojů HTTP.</span><span class="sxs-lookup"><span data-stu-id="10471-122">NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

3. <span data-ttu-id="10471-123">Uložit kopii balíčku a další informace *http-cache* složky, jak je popsáno na [Správa globálních balíčků a složek mezipaměti](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="10471-123">Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="10471-124">Pokud si stáhli, nainstalujte balíček do jednotlivé uživatele *global-packages* složky.</span><span class="sxs-lookup"><span data-stu-id="10471-124">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="10471-125">NuGet vytvoří podsložky pro každý identifikátor balíčku a programu vytváří podsložky pro každou nainstalovanou verzi balíčku.</span><span class="sxs-lookup"><span data-stu-id="10471-125">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="10471-126">Závislosti balíčků NuGet nainstaluje podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="10471-126">NuGet installs package dependencies as required.</span></span> <span data-ttu-id="10471-127">Tento proces může aktualizovat verze balíčku v procesu, jak je popsáno v [řešení závislostí](../consume-packages/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="10471-127">This process might update package versions in the process, as described in [Dependency Resolution](../consume-packages/dependency-resolution.md).</span></span>

6. <span data-ttu-id="10471-128">Aktualizace dalších projektových souborů a složek:</span><span class="sxs-lookup"><span data-stu-id="10471-128">Update other project files and folders:</span></span>

    - <span data-ttu-id="10471-129">Pro projekty pomocí PackageReference, aktualizace uložených v grafu závislostí balíčku `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="10471-129">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="10471-130">Balíček obsahu nejsou zkopírovány do libovolné složky projektu.</span><span class="sxs-lookup"><span data-stu-id="10471-130">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="10471-131">Aktualizace `app.config` a/nebo `web.config` pokud používá balíček [zdrojových a konfiguračních souborů transformace](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="10471-131">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

7. <span data-ttu-id="10471-132">(Pouze visual Studio) Zobrazte soubor readme balíčku, pokud je k dispozici v okně aplikace Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="10471-132">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

<span data-ttu-id="10471-133">Užijte si produktivní psaní kódu s balíčky NuGet.</span><span class="sxs-lookup"><span data-stu-id="10471-133">Enjoy your productive coding with NuGet packages!</span></span>
