---
title: Co se stane, když je balíček nainstalován?
description: Podrobné informace o procesu instalace balíčku
author: karann-msft
ms.author: karann
ms.date: 06/20/2019
ms.topic: conceptual
ms.openlocfilehash: 1ae030c308b14b8884fb608c1683c8c46000b0bd
ms.sourcegitcommit: 2b50c450cca521681a384aa466ab666679a40213
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/07/2020
ms.locfileid: "77036900"
---
# <a name="what-happens-when-a-nuget-package-is-installed"></a><span data-ttu-id="fdd66-103">Co se stane, když je nainstalován balíček NuGet?</span><span class="sxs-lookup"><span data-stu-id="fdd66-103">What happens when a NuGet package is installed?</span></span>

<span data-ttu-id="fdd66-104">Jednoduše řečeno, různé nástroje NuGet obvykle vytvořit odkaz na balíček v souboru projektu nebo `packages.config`potom provést obnovení balíčku, který efektivně nainstaluje balíček.</span><span class="sxs-lookup"><span data-stu-id="fdd66-104">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="fdd66-105">Výjimkou je `nuget install`, která pouze rozbalí `packages` balíček do složky a nezmění žádné jiné soubory.</span><span class="sxs-lookup"><span data-stu-id="fdd66-105">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="fdd66-106">Obecný postup:</span><span class="sxs-lookup"><span data-stu-id="fdd66-106">The general process is as follows:</span></span>

1. <span data-ttu-id="fdd66-107">(Všechny nástroje `nuget.exe`kromě ) Zaznamenejte identifikátor balíčku a `packages.config`verzi do souboru projektu nebo .</span><span class="sxs-lookup"><span data-stu-id="fdd66-107">(All tools except `nuget.exe`) Record the package identifier and version into the project file or `packages.config`.</span></span>

   <span data-ttu-id="fdd66-108">Pokud je instalačnínástroj Visual Studio nebo dotnet CLI, nástroj se nejprve pokusí nainstalovat balíček.</span><span class="sxs-lookup"><span data-stu-id="fdd66-108">If the installation tool is Visual Studio or the dotnet CLI, the tool first attempts to install the package.</span></span> <span data-ttu-id="fdd66-109">Pokud je nekompatibilní, balíček není přidán do `packages.config`souboru projektu nebo .</span><span class="sxs-lookup"><span data-stu-id="fdd66-109">If it's incompatible, the package is not added to the project file or `packages.config`.</span></span>

2. <span data-ttu-id="fdd66-110">Získejte balíček:</span><span class="sxs-lookup"><span data-stu-id="fdd66-110">Acquire the package:</span></span>
   - <span data-ttu-id="fdd66-111">Zkontrolujte, zda je balíček (podle přesného identifikačního čísla a čísla verze) již nainstalován ve složce *globálních balíčků,* jak je popsáno v [části Správa globálních balíčků a složek mezipaměti](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="fdd66-111">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="fdd66-112">Pokud balíček není ve složce *globální balíčky,* pokuste se jej načíst ze zdrojů uvedených v [konfiguračních souborech](../consume-packages/Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="fdd66-112">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed in the [configuration files](../consume-packages/Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="fdd66-113">U online zdrojů se nejprve pokuste načíst balíček z mezipaměti HTTP, pokud není `-NoCache` zadán pomocí `nuget.exe` příkazů nebo `--no-cache` není zadán pomocí . `dotnet restore`</span><span class="sxs-lookup"><span data-stu-id="fdd66-113">For online sources, attempt first to retrieve the package from the HTTP cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="fdd66-114">(Visual Studio `dotnet add package` a vždy používat mezipaměť.) Pokud je balíček použit z mezipaměti, "CACHE" se zobrazí ve výstupu.</span><span class="sxs-lookup"><span data-stu-id="fdd66-114">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="fdd66-115">Mezipaměť má dobu vypršení platnosti 30 minut.</span><span class="sxs-lookup"><span data-stu-id="fdd66-115">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="fdd66-116">Pokud balíček není v mezipaměti HTTP, pokuste se jej stáhnout ze zdrojů uvedených v konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="fdd66-116">If the package is not in the HTTP cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="fdd66-117">Pokud je balíček stažen, "GET" a "OK" se objeví ve výstupu.</span><span class="sxs-lookup"><span data-stu-id="fdd66-117">If a package is downloaded, "GET" and "OK" appear in the output.</span></span> <span data-ttu-id="fdd66-118">NuGet protokoly http přenosy na normální podrobnost.</span><span class="sxs-lookup"><span data-stu-id="fdd66-118">NuGet logs http traffic on normal verbosity.</span></span>

   - <span data-ttu-id="fdd66-119">Pokud balíček nelze úspěšně získat z žádného zdroje, instalace se nezdaří v tomto okamžiku s chybou, jako je [nu1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="fdd66-119">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="fdd66-120">Všimněte si, že chyby z `nuget.exe` příkazů zobrazit pouze poslední zdroj zaškrtnuto, ale znamená, že balíček nebyl k dispozici z žádného zdroje.</span><span class="sxs-lookup"><span data-stu-id="fdd66-120">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="fdd66-121">Při získávání balíčku může použít pořadí zdrojů v konfiguraci NuGet:</span><span class="sxs-lookup"><span data-stu-id="fdd66-121">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="fdd66-122">NuGet kontroluje zdroje místních složek a síťových sdílených složek před kontrolou zdrojů HTTP.</span><span class="sxs-lookup"><span data-stu-id="fdd66-122">NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

3. <span data-ttu-id="fdd66-123">Uložte kopii balíčku a další informace do složky *http-cache,* jak je popsáno v [části Správa globálních balíčků a složek mezipaměti](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="fdd66-123">Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="fdd66-124">Pokud je stažen, nainstalujte balíček do složky *globálních balíčků* pro jednotlivé uživatele.</span><span class="sxs-lookup"><span data-stu-id="fdd66-124">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="fdd66-125">NuGet vytvoří podsložku pro každý identifikátor balíčku, pak vytvoří podsložky pro každou nainstalovanou verzi balíčku.</span><span class="sxs-lookup"><span data-stu-id="fdd66-125">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="fdd66-126">NuGet nainstaluje závislosti balíčků podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="fdd66-126">NuGet installs package dependencies as required.</span></span> <span data-ttu-id="fdd66-127">Tento proces může aktualizovat verze balíčků v procesu, jak je popsáno v [řešení závislostí](../concepts/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="fdd66-127">This process might update package versions in the process, as described in [Dependency Resolution](../concepts/dependency-resolution.md).</span></span>

6. <span data-ttu-id="fdd66-128">Aktualizace dalších souborů a složek projektu:</span><span class="sxs-lookup"><span data-stu-id="fdd66-128">Update other project files and folders:</span></span>

    - <span data-ttu-id="fdd66-129">U projektů používajících odkaz packagereference aktualizujte graf závislostí balíčku uložený v aplikaci `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="fdd66-129">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="fdd66-130">Samotný obsah balíčku nejsou zkopírovány do žádné složky projektu.</span><span class="sxs-lookup"><span data-stu-id="fdd66-130">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="fdd66-131">Aktualizace `app.config` a/nebo `web.config` pokud balíček používá [transformace zdrojového a konfiguračního souboru](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="fdd66-131">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

7. <span data-ttu-id="fdd66-132">(Pouze visual studio) Zobrazení souboru readme balíčku, pokud je k dispozici, v okně sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fdd66-132">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

<span data-ttu-id="fdd66-133">Užijte si produktivní kódování s balíčky NuGet!</span><span class="sxs-lookup"><span data-stu-id="fdd66-133">Enjoy your productive coding with NuGet packages!</span></span>
