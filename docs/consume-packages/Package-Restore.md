---
title: Obnovení balíčků NuGet
description: Přehled o tom, jak NuGet obnoví balíčky, na které projekt závisí, včetně postup zakázání obnovení a omezení verze.
author: karann-msft
ms.author: karann
ms.date: 03/16/2018
ms.topic: conceptual
ms.openlocfilehash: b95c4462a214a78452f9dbe35936620636c4f60b
ms.sourcegitcommit: 1d1406764c6af5fb7801d462e0c4afc9092fa569
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/04/2018
ms.locfileid: "43548769"
---
# <a name="package-restore"></a><span data-ttu-id="56dbc-103">Obnovení balíčku</span><span class="sxs-lookup"><span data-stu-id="56dbc-103">Package Restore</span></span>

<span data-ttu-id="56dbc-104">Zvýšit úroveň čištění vývojového prostředí a snížit velikost úložiště, NuGet **obnovení balíčků** nainstaluje všechny projektu závislosti, jak je uvedeno v jednom souboru projektu nebo `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="56dbc-104">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all a project's dependencies as listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="56dbc-105">Visual Studio můžete obnovit balíčky automaticky při vytváření projektu.</span><span class="sxs-lookup"><span data-stu-id="56dbc-105">Visual Studio can restore packages automatically when a project is built.</span></span> <span data-ttu-id="56dbc-106">`dotnet build` a `dotnet run` příkazy (.NET Core 2.0 +) také provést automatické obnovování.</span><span class="sxs-lookup"><span data-stu-id="56dbc-106">The `dotnet build` and `dotnet run` commands (.NET Core 2.0+) also perform an automatic restore.</span></span> <span data-ttu-id="56dbc-107">Můžete také obnovit balíčky v každém okamžiku prostřednictvím sady Visual Studio `nuget restore`, `dotnet restore`a xbuild v Mono.</span><span class="sxs-lookup"><span data-stu-id="56dbc-107">You can also restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="56dbc-108">Obnovení balíčků zajišťuje, že všechny projektu závislosti jsou k dispozici bez ukládání těchto balíčků ve správě zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="56dbc-108">Package restore makes sure that all a project's dependencies are available without storing those packages in source control.</span></span> <span data-ttu-id="56dbc-109">Zobrazit [balíčky a Správa zdrojového kódu](../consume-packages/packages-and-source-control.md) o tom, jak nakonfigurovat úložiště k vyloučení binární soubory balíčku.</span><span class="sxs-lookup"><span data-stu-id="56dbc-109">See [Packages and Source Control](../consume-packages/packages-and-source-control.md) on how to configure your repository to exclude package binaries.</span></span>

## <a name="package-restore-overview"></a><span data-ttu-id="56dbc-110">Přehled obnovení balíčků</span><span class="sxs-lookup"><span data-stu-id="56dbc-110">Package restore overview</span></span>

<span data-ttu-id="56dbc-111">Obnovují se balíčky nejdřív nainstaluje přímé závislosti projektu podle potřeby a potom nainstaluje všechny závislosti tyto balíčky v průběhu graf závislostí pro celé.</span><span class="sxs-lookup"><span data-stu-id="56dbc-111">Restoring packages first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="56dbc-112">Pokud balíček není nainstalovaná, NuGet se nejprve pokusí načíst z [mezipaměti](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="56dbc-112">If a package is not already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="56dbc-113">Pokud balíček není v mezipaměti, NuGet se pak pokusí stáhnout balíček ze všech zdrojů povolené (naleznete v tématu [konfigurace NuGet chování](Configuring-NuGet-Behavior.md); zdroje se zobrazí také v **nástroje > Možnosti > Správce balíčků NuGet > Zdroje balíčků** seznamu v sadě Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="56dbc-113">If the package is not in the cache, NuGet then attempts to download the package from all enabled sources (see [Configuring NuGet behavior](Configuring-NuGet-Behavior.md); sources also appear in the  **Tools > Options > NuGet Package Manager > Package Sources** list in Visual Studio).</span></span> <span data-ttu-id="56dbc-114">Během obnovení NuGet ignoruje pořadí zdroje balíčků pomocí balíčku od toho zdroje je nejprve reagovat na požadavky.</span><span class="sxs-lookup"><span data-stu-id="56dbc-114">During restore, NuGet ignores the order of package sources, using the package from whichever source is first to respond to requests.</span></span>

> [!Note]
> <span data-ttu-id="56dbc-115">NuGet neznamená neúspěšného obnovení balíčku, dokud byly vráceny všechny zdroje.</span><span class="sxs-lookup"><span data-stu-id="56dbc-115">NuGet does not indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="56dbc-116">V tu chvíli NuGet hlásí selhání pouze poslední zdroje v seznamu.</span><span class="sxs-lookup"><span data-stu-id="56dbc-116">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="56dbc-117">Chyba znamená, že nebyl k dispozici v balíčku *jakékoli* z jiných zdrojů i v případě chyby se nezobrazují pro každou z těchto zdrojů jednotlivě.</span><span class="sxs-lookup"><span data-stu-id="56dbc-117">The error implies that the package wasn't present on *any* of the other sources, even though errors are not shown for each of those sources individually.</span></span>

<span data-ttu-id="56dbc-118">Obnovení balíčku se aktivuje následujícími způsoby:</span><span class="sxs-lookup"><span data-stu-id="56dbc-118">Package restore is triggered in the following ways:</span></span>

- <span data-ttu-id="56dbc-119">**rozhraní příkazového řádku DotNet**: použijte [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) příkaz, který obnoví balíčky uvedené v souboru projektu (viz [PackageReference](../consume-packages/package-references-in-project-files.md)).</span><span class="sxs-lookup"><span data-stu-id="56dbc-119">**dotnet CLI**: use the [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) command, which restores packages listed in the project file (see [PackageReference](../consume-packages/package-references-in-project-files.md)).</span></span> <span data-ttu-id="56dbc-120">S .NET Core 2.0 nebo novější, obnovení se provádí automaticky pomocí `dotnet build` a `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="56dbc-120">With .NET Core 2.0 and later, restore is done automatically with `dotnet build` and `dotnet run`.</span></span>

- <span data-ttu-id="56dbc-121">**Uživatelské rozhraní Správce balíčků (Visual Studio na Windows)**: obnovení balíčků automaticky při vytvoření projektu ze šablony a při sestavování projektu (v souladu s možnosti popsané v [povolení a zakázání balíček obnovení](#enabling-and-disabling-package-restore)).</span><span class="sxs-lookup"><span data-stu-id="56dbc-121">**Package Manager UI (Visual Studio on Windows)**: Packages are restored automatically when creating a project from a template and when building a project (subject to the option described in [Enabling and disabling package restore](#enabling-and-disabling-package-restore)).</span></span> <span data-ttu-id="56dbc-122">Ve Správci NuGet 4.0 + obnovit také dojde automaticky při změn projektu založeného na .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="56dbc-122">In NuGet 4.0+, restore also happens automatically when changes are made to a .NET Core SDK-based project.</span></span>

    <span data-ttu-id="56dbc-123">Chcete-li obnovit ručně, klikněte pravým tlačítkem na řešení v Průzkumníku řešení a vyberte **obnovit balíčky NuGet**.</span><span class="sxs-lookup"><span data-stu-id="56dbc-123">To restore manually, right-click the solution in Solution Explorer and select **Restore NuGet Packages**.</span></span> <span data-ttu-id="56dbc-124">Pokud jeden nebo více jednotlivých balíčků se stále není správně nainstalován (tj., Průzkumník řešení zobrazuje ikona chyby) a pak použijte uživatelské rozhraní Správce balíčků odinstalovat a znovu nainstalovat ovlivněné balíčky.</span><span class="sxs-lookup"><span data-stu-id="56dbc-124">If one or more individual packages are still not installed properly (meaning that Solution Explorer shows an error icon), then use the Package Manager UI to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="56dbc-125">Zobrazit [Reinstalling a aktualizace balíčků](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="56dbc-125">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

    <span data-ttu-id="56dbc-126">Pokud se zobrazí chyba "Tento projekt odkazuje na balíčky NuGet, které jsou na tomto počítači chybí" nebo "jeden nebo více balíčků NuGet je nutné obnovit, ale nepodařilo, protože nebyl udělen souhlas", zapněte automatické obnovení podle pokynů v části [Povolení a zákaz obnovení balíčku](#enabling-and-disabling-package-restore).</span><span class="sxs-lookup"><span data-stu-id="56dbc-126">If you see the error "This project references NuGet package(s) that are missing on this computer" or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," turn on automatic restore by following the instructions under [Enabling and disabling package restore](#enabling-and-disabling-package-restore).</span></span> <span data-ttu-id="56dbc-127">Viz také [odstraňování problémů obnovení balíčku](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="56dbc-127">Also see [Package restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

- <span data-ttu-id="56dbc-128">**Rozhraní příkazového řádku NuGet**: použijte [obnovení nuget](../tools/cli-ref-restore.md) příkaz, který obnoví balíčky uvedené v souboru projektu nebo v `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="56dbc-128">**NuGet CLI**: use the [nuget restore](../tools/cli-ref-restore.md) command, which restores packages listed in the project file or in `packages.config`.</span></span> <span data-ttu-id="56dbc-129">Můžete také určit soubor řešení.</span><span class="sxs-lookup"><span data-stu-id="56dbc-129">You can also specify a solution file.</span></span>

- <span data-ttu-id="56dbc-130">**Nástroj MSBuild**: použijte [msbuild/t: Restore](../reference/msbuild-targets.md#restore-target) příkaz, který obnoví balíčky balíčky uvedené v souboru projektu (pouze PackageReference).</span><span class="sxs-lookup"><span data-stu-id="56dbc-130">**MSBuild**: use the [msbuild /t:restore](../reference/msbuild-targets.md#restore-target) command, which restores packages packages listed in the project file (PackageReference only).</span></span> <span data-ttu-id="56dbc-131">K dispozici pouze v NuGet 4.x+ a MSBuild 15.1 +, které jsou součástí sady Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="56dbc-131">Available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017.</span></span> <span data-ttu-id="56dbc-132">`nuget restore` a `dotnet restore` obě použijte tento příkaz pro příslušné projekty.</span><span class="sxs-lookup"><span data-stu-id="56dbc-132">`nuget restore` and `dotnet restore` both use this command for applicable projects.</span></span>

- <span data-ttu-id="56dbc-133">**Visual Studio Team Services**: při vytváření definice sestavení ve službě Team Services, patří [obnovení NuGet](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) nebo [obnovení aplikace .NET Core](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) úloh v definici před libovolná sestavení úkolu.</span><span class="sxs-lookup"><span data-stu-id="56dbc-133">**Visual Studio Team Services**: When creating a build definition on Team Services, include the [NuGet restore](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) or [.NET Core Restore](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) task in the definition before any build task.</span></span> <span data-ttu-id="56dbc-134">Tato úloha je zahrnuté ve výchozím nastavení v počtu šablon sestavení.</span><span class="sxs-lookup"><span data-stu-id="56dbc-134">This task is included by default in a number of build templates.</span></span>

- <span data-ttu-id="56dbc-135">**Team Foundation Server**: TFS 2013 a novější automatické obnovení balíčků během sestavení, za předpokladu, že používáte týmového sestavení šablony pro TFS 2013 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="56dbc-135">**Team Foundation Server**: TFS 2013 and later automatically restores packages during build, provided that you're using a Team Build Template for TFS 2013 or later.</span></span> <span data-ttu-id="56dbc-136">Pro starší verze TFS můžete zahrnout krok sestavení k vyvolání jednu z výše uvedených možností příkazového řádku obnovení.</span><span class="sxs-lookup"><span data-stu-id="56dbc-136">For earlier version of TFS, you can include a build step to invoke one of the command-line restore options above.</span></span> <span data-ttu-id="56dbc-137">Volitelně můžete migrovat šablony sestavení do TFS 2013.</span><span class="sxs-lookup"><span data-stu-id="56dbc-137">You can optionally migrate the build template to TFS 2013.</span></span> <span data-ttu-id="56dbc-138">Další informace najdete v tématu [návod k obnovení balíčků pomocí procesu Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="56dbc-138">For more information, see the [Walkthrough of package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="enabling-and-disabling-package-restore"></a><span data-ttu-id="56dbc-139">Povolení a zakázání obnovení balíčku</span><span class="sxs-lookup"><span data-stu-id="56dbc-139">Enabling and disabling package restore</span></span>

<span data-ttu-id="56dbc-140">Obnovení balíčku především zajišťuje **nástroje > Možnosti > Správce balíčků NuGet** v sadě Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="56dbc-140">Package restore is primarily enabled through **Tools > Options > NuGet Package Manager** in Visual Studio:</span></span>

![Řízení chování balíčku obnovení prostřednictvím možnosti Správce balíčků NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="56dbc-142">**Umožnit správci balíčků NuGet stáhnout chybějící balíčky**: Určuje všechny formy obnovení balíčku tak, že změníte `packageRestore/enabled` nastavení `NuGet.Config` sdílené, jak je znázorněno níže (`%AppData%\NuGet\NuGet.Config` na Windows, `~/.nuget/NuGet/NuGet.Config` na Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="56dbc-142">**Allow NuGet to download missing packages**: controls all forms of package restore by changing the `packageRestore/enabled` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="56dbc-143">V sadě Visual Studio, toto nastavení umožňuje **obnovit balíčky NuGet** příkazu v místní nabídce řešení pro práci.</span><span class="sxs-lookup"><span data-stu-id="56dbc-143">In Visual Studio, this setting allows the **Restore NuGet Packages** command on the solution's context menu to work.</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-Integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    <br/>
    > [!Note]
    >  <span data-ttu-id="56dbc-144">`packageRestore/enabled` Nastavení se dá přepsat globální nastavení proměnné prostředí volá **EnableNuGetPackageRestore** s hodnotou PRAVDA nebo NEPRAVDA před spuštěním aplikace Visual Studio nebo spuštění sestavení.</span><span class="sxs-lookup"><span data-stu-id="56dbc-144">The `packageRestore/enabled` setting can be overridden globally by setting an environment variable called **EnableNuGetPackageRestore** with a value of TRUE or FALSE before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="56dbc-145">**Automaticky zjišťovat pro chybějící balíčky během vytváření v sadě Visual Studio**: řídí automatické obnovení tak, že změníte `packageRestore/automatic` nastavení `NuGet.Config` sdílené, jak je znázorněno níže (`%AppData%\NuGet\NuGet.Config` na Windows, `~/.nuget/NuGet/NuGet.Config` na Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="56dbc-145">**Automatically check for missing packages during build in Visual Studio**: controls automatic restore by changing the `packageRestore/automatic` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="56dbc-146">Když nastavíte tuto možnost, systémem sestavení ze sady Visual Studio automaticky obnoví všechny chybějící balíčky.</span><span class="sxs-lookup"><span data-stu-id="56dbc-146">When this option is set, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="56dbc-147">Možnost nemá vliv na sestavení, spusťte z příkazového řádku pomocí nástroje MSBuild.</span><span class="sxs-lookup"><span data-stu-id="56dbc-147">The option does not affect builds run from the command line using MSBuild.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="56dbc-148">Odkaz, najdete v článku [NuGet konfiguračního souboru – část packageRestore](../reference/nuget-config-file.md#packagerestore-section).</span><span class="sxs-lookup"><span data-stu-id="56dbc-148">For reference, see the [NuGet config file - packageRestore section](../reference/nuget-config-file.md#packagerestore-section).</span></span>

<span data-ttu-id="56dbc-149">V některých případech může být vhodné pro vývojáře nebo společnosti k povolení nebo zakázání obnovení balíčků pro všechny uživatele v počítači.</span><span class="sxs-lookup"><span data-stu-id="56dbc-149">In some cases, a developer or company might want to enable or disable package restore for all users on a computer.</span></span> <span data-ttu-id="56dbc-150">K tomuto účelu přidat do globální NuGet konfigurační soubor umístěný ve stejné nastavení výše `%ProgramData%\NuGet\Config` (Windows, potenciálně v rámci konkrétní `\{IDE}\{Version}\{SKU}\` složka pro sadu Visual Studio) nebo `~/.local/share` (Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="56dbc-150">To do this, add the same settings above to the global NuGet configuration file located in `%ProgramData%\NuGet\Config` (Windows, potentially under a specific `\{IDE}\{Version}\{SKU}\` folder for Visual Studio) or `~/.local/share` (Mac/Linux).</span></span> <span data-ttu-id="56dbc-151">Jednotlivým uživatelům můžete selektivně povolte obnovení podle potřeby na úrovni projektu.</span><span class="sxs-lookup"><span data-stu-id="56dbc-151">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="56dbc-152">Zobrazit [konfigurace NuGet chování](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) najdete přesné informace o tom, jak NuGet upřednostňuje více konfiguračních souborů.</span><span class="sxs-lookup"><span data-stu-id="56dbc-152">See [Configuring NuGet behavior](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) for exact details on how NuGet prioritizes multiple config files.</span></span>

> [!Important]
> <span data-ttu-id="56dbc-153">Pokud upravíte `packageRestore` přímo v nastavení `nuget.config`, restartujte aplikaci Visual Studio tak, aby se dialogové okno Možnosti zobrazuje aktuální hodnoty.</span><span class="sxs-lookup"><span data-stu-id="56dbc-153">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio so that the options dialog box shows the current values.</span></span>

## <a name="constraining-package-versions-with-restore"></a><span data-ttu-id="56dbc-154">Omezující verze balíčků pomocí obnovení</span><span class="sxs-lookup"><span data-stu-id="56dbc-154">Constraining package versions with restore</span></span>

<span data-ttu-id="56dbc-155">Při obnovování balíčků pomocí libovolné metody, NuGet respektuje omezeními podle `packages.config` nebo soubor projektu:</span><span class="sxs-lookup"><span data-stu-id="56dbc-155">When restoring packages through any method, NuGet honors any constraints specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="56dbc-156">`packages.config`: Zadejte rozsah verzí v `allowedVersion` vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="56dbc-156">`packages.config`: Specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="56dbc-157">Zobrazit [Reinstalling a aktualizace balíčků](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span><span class="sxs-lookup"><span data-stu-id="56dbc-157">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span></span> <span data-ttu-id="56dbc-158">Příklad:</span><span class="sxs-lookup"><span data-stu-id="56dbc-158">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="56dbc-159">Soubor projektu (PackageReference): přímo s číslem verze závislosti uvádět rozsah verzí.</span><span class="sxs-lookup"><span data-stu-id="56dbc-159">Project file (PackageReference): Specify a version range directly with the dependency's version number.</span></span> <span data-ttu-id="56dbc-160">Příklad:</span><span class="sxs-lookup"><span data-stu-id="56dbc-160">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="56dbc-161">Ve všech případech použijte notaci podle [Správa verzí balíčků](../reference/package-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="56dbc-161">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="forcing-restore-from-package-sources"></a><span data-ttu-id="56dbc-162">Vynucení obnovení ze zdroje balíčku</span><span class="sxs-lookup"><span data-stu-id="56dbc-162">Forcing restore from package sources</span></span>

<span data-ttu-id="56dbc-163">Ve výchozím nastavení, operace obnovení NuGet používat balíčky z *global-packages* a *http-cache* složkách, které jsou popsány v [Správa globálních balíčků a složek mezipaměti](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="56dbc-163">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="56dbc-164">Abyste se vyhnuli použití *global-packages* složky, proveďte jednu z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="56dbc-164">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="56dbc-165">Zrušte pomocí složky `nuget locals global-packages -clear` nebo `dotnet nuget locals global-packages --clear`</span><span class="sxs-lookup"><span data-stu-id="56dbc-165">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`</span></span>
- <span data-ttu-id="56dbc-166">Dočasně změnit umístění *global-packages* složky, před provedením operace obnovení pomocí jedné z následujících metod:</span><span class="sxs-lookup"><span data-stu-id="56dbc-166">Temporarily change the location of the *global-packages* folder before the restore operation using one of the following methods:</span></span>
  - <span data-ttu-id="56dbc-167">Nastavte proměnnou prostředí NUGET_PACKAGES do jiné složky.</span><span class="sxs-lookup"><span data-stu-id="56dbc-167">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="56dbc-168">Vytvoření `NuGet.Config` souboru, který nastaví `globalPackagesFolder` (Pokud se používá PackageReference) nebo `repositoryPath` (Pokud používáte `packages.config`) do jiné složky (naleznete v tématu [nastavení konfigurace](../reference/nuget-config-file.md#config-section)</span><span class="sxs-lookup"><span data-stu-id="56dbc-168">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder (see [configuration settings](../reference/nuget-config-file.md#config-section)</span></span>
  - <span data-ttu-id="56dbc-169">Pouze nástroj MSBuild: zadat jinou složku s `RestorePackagesPath` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="56dbc-169">MSBuild only: specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="56dbc-170">Abyste se vyhnuli použití mezipaměti u zdrojů HTTP, proveďte jednu z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="56dbc-170">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="56dbc-171">Použití `-NoCache` spolu s možností `nuget restore` nebo `--no-cache` spolu s možností `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="56dbc-171">Use the `-NoCache` option with `nuget restore` or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="56dbc-172">Tyto možnosti nemají vliv na operace obnovení, ať už Visual Studio uživatelské rozhraní Správce balíčků nebo konzoly.</span><span class="sxs-lookup"><span data-stu-id="56dbc-172">These options do not affect restore operations through the Visual Studio Package Manager UI or Console.</span></span>
- <span data-ttu-id="56dbc-173">Vymazání mezipaměti pomocí `nuget locals http-cache -clear` nebo `dotnet nuget locals http-cache --clear`.</span><span class="sxs-lookup"><span data-stu-id="56dbc-173">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="56dbc-174">Dočasně nastaví proměnné prostředí NUGET_HTTP_CACHE_PATH do jiné složky.</span><span class="sxs-lookup"><span data-stu-id="56dbc-174">Temporarily set of the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="56dbc-175">Poradce při potížích</span><span class="sxs-lookup"><span data-stu-id="56dbc-175">Troubleshooting</span></span>

<span data-ttu-id="56dbc-176">Zobrazit [odstraňování problémů obnovení balíčku](package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="56dbc-176">See [Troubleshooting package restore](package-restore-troubleshooting.md).</span></span>