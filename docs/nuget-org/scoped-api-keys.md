---
title: S vymezeným oborem klíče rozhraní API
description: Převzetí kontroly nad klíče rozhraní API, které používají tak, aby nabízel balíčky
author: mikejo5000
ms.author: mikejo
ms.date: 06/04/2019
ms.topic: conceptual
ms.openlocfilehash: 12d12d5294a474c4d3e4f5d3cad468bb515d21d5
ms.sourcegitcommit: b6810860b77b2d50aab031040b047c20a333aca3
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/28/2019
ms.locfileid: "67427500"
---
# <a name="scoped-api-keys"></a><span data-ttu-id="23de6-103">S vymezeným oborem klíče rozhraní API</span><span class="sxs-lookup"><span data-stu-id="23de6-103">Scoped API keys</span></span>

<span data-ttu-id="23de6-104">Chcete-li lépe zabezpečené prostředí pro distribuci balíčku NuGet, může převzít kontrolu nad klíči rozhraní API přidáním oborů.</span><span class="sxs-lookup"><span data-stu-id="23de6-104">To make NuGet a more secure environment for package distribution, you can take control of the API keys by adding scopes.</span></span>

<span data-ttu-id="23de6-105">Schopnost poskytovat nastavit obor na klíči rozhraní API poskytují lepší kontrolu rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="23de6-105">The ability to provide scope to your API keys give you better control on your APIs.</span></span> <span data-ttu-id="23de6-106">Můžete:</span><span class="sxs-lookup"><span data-stu-id="23de6-106">You can:</span></span>

- <span data-ttu-id="23de6-107">Vytvoření více vymezených klíče rozhraní API, které lze použít pro jiné balíčky s různou časových rámců při vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="23de6-107">Create multiple scoped API keys that can be used for different packages with varying expiration timeframes.</span></span>
- <span data-ttu-id="23de6-108">Získání klíčů rozhraní API zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="23de6-108">Obtain API keys securely.</span></span>
- <span data-ttu-id="23de6-109">Upravte existující klíče rozhraní API, chcete-li změnit balíček použitelnosti.</span><span class="sxs-lookup"><span data-stu-id="23de6-109">Edit existing API keys to change package applicability.</span></span>
- <span data-ttu-id="23de6-110">Aktualizovat nebo odstranit existující klíče rozhraní API bez bránících operací pomocí dalších klíčů.</span><span class="sxs-lookup"><span data-stu-id="23de6-110">Refresh or delete existing API keys without hampering operations using other keys.</span></span>

## <a name="why-do-we-support-scoped-api-keys"></a><span data-ttu-id="23de6-111">Proč podporujeme s vymezeným oborem klíče rozhraní API?</span><span class="sxs-lookup"><span data-stu-id="23de6-111">Why do we support scoped API keys?</span></span>

<span data-ttu-id="23de6-112">Podporujeme obory klíče rozhraní API vám umožní mít udělená oprávnění dál odstupňovat.</span><span class="sxs-lookup"><span data-stu-id="23de6-112">We support scopes for API keys to allow you to have more fine-grained permissions.</span></span> <span data-ttu-id="23de6-113">Dříve NuGet nabízí jeden klíč rozhraní API pro účet a tento přístup má několik nevýhody:</span><span class="sxs-lookup"><span data-stu-id="23de6-113">Previously, NuGet offered a single API key for an account, and that approach had several drawbacks:</span></span>

- <span data-ttu-id="23de6-114">**Jeden klíč rozhraní API k řízení všech balíčků**.</span><span class="sxs-lookup"><span data-stu-id="23de6-114">**One API key to control all packages**.</span></span> <span data-ttu-id="23de6-115">Pomocí jednoho klíče rozhraní API, který se používá ke správě všech balíčků je obtížné bezpečně sdílet klíč při více vývojářů, které jsou spojené s různými balíčky a při sdílení vydavatelského účtu.</span><span class="sxs-lookup"><span data-stu-id="23de6-115">With a single API key that is used to manage all packages, it is difficult to securely share the key when multiple developers are involved with different packages, and when they share a publisher account.</span></span>
- <span data-ttu-id="23de6-116">**Všechna oprávnění, nebo žádný**.</span><span class="sxs-lookup"><span data-stu-id="23de6-116">**All permissions or none**.</span></span> <span data-ttu-id="23de6-117">Každý, kdo má přístup ke klíči rozhraní API má všechna oprávnění (publikovat, nabízených oznámení a zrušení seznamu) na balíčky.</span><span class="sxs-lookup"><span data-stu-id="23de6-117">Anyone with access to the API key has all permissions (publish, push and un-list) on the packages.</span></span> <span data-ttu-id="23de6-118">To je často žádoucí v prostředí s více týmy.</span><span class="sxs-lookup"><span data-stu-id="23de6-118">This is often not desirable in environment with multiple teams.</span></span>
- <span data-ttu-id="23de6-119">**Jeden bod selhání**.</span><span class="sxs-lookup"><span data-stu-id="23de6-119">**Single point of failure**.</span></span> <span data-ttu-id="23de6-120">Jeden klíč rozhraní API také znamená, že jediný bod selhání.</span><span class="sxs-lookup"><span data-stu-id="23de6-120">A single API key also means a single point of failure.</span></span> <span data-ttu-id="23de6-121">Pokud klíče je ohrožena všech balíčků přidružených k účtu může potenciálně dojít k ohrožení.</span><span class="sxs-lookup"><span data-stu-id="23de6-121">If the key is compromised, all packages associated with the account could potentially be compromised.</span></span> <span data-ttu-id="23de6-122">Aktualizovat klíč rozhraní API je jediný způsob, jak připojit nevracení paměti a předešlo výpadkům při pracovního postupu CI/CD.</span><span class="sxs-lookup"><span data-stu-id="23de6-122">Refreshing the API key is the only way to plug the leak and avoid an interruption to your CI/CD workflow.</span></span> <span data-ttu-id="23de6-123">Kromě toho můžou nastat případy Pokud chcete odvolat přístup ke klíči rozhraní API pro jednotlivce (například když zaměstnanec odejde z organizace).</span><span class="sxs-lookup"><span data-stu-id="23de6-123">In addition, there may be cases when you want to revoke access to the API key for an individual (for example, when an employee leaves the organization).</span></span> <span data-ttu-id="23de6-124">Není čistý způsob, jak toto zpracování ještě dnes.</span><span class="sxs-lookup"><span data-stu-id="23de6-124">There isn’t a clean way to handle this today.</span></span>

<span data-ttu-id="23de6-125">S klíči rozhraní API s vymezeným oborem Snažíme se vyřešit tyto problémy při a ujistěte se, že žádná z stávajících pracovních postupů přerušit.</span><span class="sxs-lookup"><span data-stu-id="23de6-125">With scoped API keys, we try to address these problems while making sure that none of the existing workflows break.</span></span>

## <a name="acquire-an-api-key"></a><span data-ttu-id="23de6-126">Získání klíče rozhraní API</span><span class="sxs-lookup"><span data-stu-id="23de6-126">Acquire an API key</span></span>

[!INCLUDE [publish-api-key](../quickstart/includes/publish-api-key.md)]

## <a name="create-scoped-api-keys"></a><span data-ttu-id="23de6-127">Vytvoření s vymezeným oborem klíče rozhraní API</span><span class="sxs-lookup"><span data-stu-id="23de6-127">Create scoped API keys</span></span>

<span data-ttu-id="23de6-128">Můžete vytvořit víc klíčů rozhraní API na základě vašich požadavků.</span><span class="sxs-lookup"><span data-stu-id="23de6-128">You can create multiple API keys based on your requirements.</span></span> <span data-ttu-id="23de6-129">Klíč rozhraní API můžete použít jeden nebo více balíčků, mají různé obory, které udělují oprávnění a mají datum vypršení platnosti s ním spojená.</span><span class="sxs-lookup"><span data-stu-id="23de6-129">An API key can apply to one or more packages, have varying scopes that grant specific privileges, and have an expiration date associated with it.</span></span>

<span data-ttu-id="23de6-130">V následujícím příkladu máte klíč rozhraní API s názvem `Contoso service CI` , který můžete použít k balíčky pro konkrétní `Contoso.Service` balíčky a je platný 365 dní.</span><span class="sxs-lookup"><span data-stu-id="23de6-130">In the following example, you have an API key named `Contoso service CI` that can be used to push packages for specific `Contoso.Service` packages, and is valid for 365 days.</span></span> <span data-ttu-id="23de6-131">Toto je typický scénář, kde jsou různé týmy v rámci stejné organizace prací na různých balíčcích a členy týmu k dispozici klíč, který uděluje oprávnění jen pro balíček, na kterém pracují.</span><span class="sxs-lookup"><span data-stu-id="23de6-131">This is a typical scenario where different teams within the same organization work on different packages, and the members of the team are provided the key that grants them privileges only for the package they are working on.</span></span> <span data-ttu-id="23de6-132">Vypršení platnosti slouží jako mechanismus, aby se zabránilo zastaralé či zapomenutí klíče.</span><span class="sxs-lookup"><span data-stu-id="23de6-132">The expiration serves as a mechanism to prevent stale or forgotten keys.</span></span>

![Vytvoření klíče rozhraní API](media/scoped-api-keys-create-new.png)

## <a name="use-glob-patterns"></a><span data-ttu-id="23de6-134">Použití glob vzory</span><span class="sxs-lookup"><span data-stu-id="23de6-134">Use glob patterns</span></span>

<span data-ttu-id="23de6-135">Pokud pracujete ve více balíčků a máte dlouhý seznam balíčků pro správu, můžete pomocí vzorů podpory zástupných znaků vybrat více balíčků najednou.</span><span class="sxs-lookup"><span data-stu-id="23de6-135">If you are working on multiple packages and have a large list of packages to manage, you can choose to use globbing patterns to select multiple packages together.</span></span> <span data-ttu-id="23de6-136">Například pokud budete chtít udělit konkrétní obory pro klíč pro všechny balíčky, jejichž ID začíná `Fabrikam.Service`, můžete to udělat tak, že zadáte `fabrikam.service.*` v **Glob vzor** textového pole.</span><span class="sxs-lookup"><span data-stu-id="23de6-136">For example, if you wish to grant specific scopes to a key for all packages whose ID starts with `Fabrikam.Service`, you could do this by specifying `fabrikam.service.*` in the **Glob pattern** text box.</span></span>

![Vytvoření klíče rozhraní API](media/scoped-api-keys-glob-pattern.png)

<span data-ttu-id="23de6-138">Určit oprávnění klíče rozhraní API pomocí vzorů glob platí také pro nové balíčky pro odpovídající vzoru glob.</span><span class="sxs-lookup"><span data-stu-id="23de6-138">Using glob patterns to determine API key permissions also applies to new packages matching the glob pattern.</span></span> <span data-ttu-id="23de6-139">Například, pokud se pokusíte vložit nový balíček s názvem `Fabrikam.Service.Framework`, můžete to udělat pomocí klíče vytvořili dříve, protože balíček shoduje se vzorem glob `fabrikam.service.*`.</span><span class="sxs-lookup"><span data-stu-id="23de6-139">For example, if you try to push a new package named `Fabrikam.Service.Framework`, you can do that with the key created previously, since the package matches the glob pattern `fabrikam.service.*`.</span></span>

## <a name="obtain-api-keys-securely"></a><span data-ttu-id="23de6-140">Získání klíčů rozhraní API zabezpečené</span><span class="sxs-lookup"><span data-stu-id="23de6-140">Obtain API keys securely</span></span>

<span data-ttu-id="23de6-141">Pro zabezpečení, nově vytvořený klíč se nikdy zobrazí na obrazovce a je k dispozici používání jenom **kopírování** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="23de6-141">For security, a newly created key is never shown on the screen and is only available using the **Copy** button.</span></span> <span data-ttu-id="23de6-142">Podobně klíč není přístupný, po aktualizaci stránky.</span><span class="sxs-lookup"><span data-stu-id="23de6-142">Similarly, the key is not accessible after the page is refreshed.</span></span>

![Vytvoření klíče rozhraní API](media/scoped-api-keys-obtain-keys.png)

## <a name="edit-existing-api-keys"></a><span data-ttu-id="23de6-144">Upravit existující klíče rozhraní API</span><span class="sxs-lookup"><span data-stu-id="23de6-144">Edit existing API keys</span></span>

<span data-ttu-id="23de6-145">Můžete také aktualizovat oprávnění ke klíči a obory beze změny vlastního klíče.</span><span class="sxs-lookup"><span data-stu-id="23de6-145">You may also want to update the key permissions and scopes without changing the key itself.</span></span> <span data-ttu-id="23de6-146">Pokud máte klíč s konkrétní rozsahy pro jeden balíček, můžete použít stejné rozsahy na jeden nebo více balíčků.</span><span class="sxs-lookup"><span data-stu-id="23de6-146">If you have a key with specific scope(s) for a single package, you can choose to apply the same scope(s) on one or many other packages.</span></span>

![Vytvoření klíče rozhraní API](media/scoped-api-keys-edit.png)

## <a name="refresh-or-delete-existing-api-keys"></a><span data-ttu-id="23de6-148">Aktualizovat nebo odstranit existující klíče rozhraní API</span><span class="sxs-lookup"><span data-stu-id="23de6-148">Refresh or delete existing API keys</span></span>

<span data-ttu-id="23de6-149">Vlastník účtu můžete klíč aktualizovat, v takovém případě oprávnění (balíčky), oboru a vypršení platnosti zůstanou stejné, ale nový klíč vystaven, provádění nepoužitelné starý klíč.</span><span class="sxs-lookup"><span data-stu-id="23de6-149">The account owner can choose to refresh the key, in which case the permission (on packages), scope, and expiry remain the same, but a new key is issued making the old key unusable.</span></span> <span data-ttu-id="23de6-150">To je užitečné při správě zastaralé klíče, nebo pokud neexistuje žádné riziko úniku klíče rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="23de6-150">This is helpful in managing stale keys or where there is any potential for an API key leakage.</span></span>

![Vytvoření klíče rozhraní API](media/scoped-api-keys-refresh.png)

<span data-ttu-id="23de6-152">Můžete také odstranit tyto klíče, pokud už nejsou potřeba.</span><span class="sxs-lookup"><span data-stu-id="23de6-152">You may also choose to delete these keys if they are not needed anymore.</span></span> <span data-ttu-id="23de6-153">Odstraňuje se klíč odebere klíč a zpřístupňuje je nepoužitelné.</span><span class="sxs-lookup"><span data-stu-id="23de6-153">Deleting a key removes the key and makes it unusable.</span></span>

## <a name="faqs"></a><span data-ttu-id="23de6-154">Nejčastější dotazy</span><span class="sxs-lookup"><span data-stu-id="23de6-154">FAQs</span></span>

### <a name="what-happens-to-my-old-legacy-api-key"></a><span data-ttu-id="23de6-155">Co se stane staré (starší verze) klíč rozhraní API?</span><span class="sxs-lookup"><span data-stu-id="23de6-155">What happens to my old (legacy) API key?</span></span>

<span data-ttu-id="23de6-156">Váš klíč rozhraní API (starší verze) i nadále fungovat a může fungovat, dokud jej chcete pracovat.</span><span class="sxs-lookup"><span data-stu-id="23de6-156">Your old API key (legacy) continues to work and can work as long as you want it to work.</span></span> <span data-ttu-id="23de6-157">Ale tyto klíče budou dostupné jenom Pokud nebyly byly použity na více než 365 dnů tak, aby nabízel balíčku.</span><span class="sxs-lookup"><span data-stu-id="23de6-157">However, these keys will be retired if they have not been used for more than 365 days to push a package.</span></span> <span data-ttu-id="23de6-158">Další podrobnosti najdete v blogovém příspěvku [změny u nichž vyprší platnost klíče rozhraní API](https://blog.nuget.org/20160825/Changes-to-Expiring-API-Keys.html).</span><span class="sxs-lookup"><span data-stu-id="23de6-158">For more details, see the blog post [Changes to expiring API keys](https://blog.nuget.org/20160825/Changes-to-Expiring-API-Keys.html).</span></span> <span data-ttu-id="23de6-159">Jste již nemůže aktualizovat tento klíč.</span><span class="sxs-lookup"><span data-stu-id="23de6-159">You can no longer refresh this key.</span></span> <span data-ttu-id="23de6-160">Budete muset odstranit starší verze klíče a místo toho vytvořte nový klíč s vymezeným oborem.</span><span class="sxs-lookup"><span data-stu-id="23de6-160">You need to delete the legacy key and create a new scoped key instead.</span></span>

> [!NOTE]
> <span data-ttu-id="23de6-161">Tento klíč má všechna oprávnění pro všechny balíčky a nikdy nevyprší.</span><span class="sxs-lookup"><span data-stu-id="23de6-161">This key has all permissions on all the packages and it never expires.</span></span> <span data-ttu-id="23de6-162">Měli byste zvážit odstranění tohoto klíče a vytvoření nových klíčů s s vymezeným oborem oprávnění a jednoznačného vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="23de6-162">You should consider deleting this key and creating new keys with scoped permissions and definite expiry.</span></span>

### <a name="how-many-api-keys-can-i-create"></a><span data-ttu-id="23de6-163">Kolik klíčů rozhraní API můžete vytvořit?</span><span class="sxs-lookup"><span data-stu-id="23de6-163">How many API keys can I create?</span></span>

<span data-ttu-id="23de6-164">Neexistuje žádné omezení počtu klíčů rozhraní API, které lze vytvořit.</span><span class="sxs-lookup"><span data-stu-id="23de6-164">There is no limit on the number of API keys you can create.</span></span> <span data-ttu-id="23de6-165">Ale doporučujeme vám zajistit jeho na spravovat počet tak, že není tím, že mají mnoho zastaralé klíče s žádné informace o umístění a kdo je používá.</span><span class="sxs-lookup"><span data-stu-id="23de6-165">However, we advise you to keep it to a manageable count so that you do not end up having many stale keys with no knowledge of where and who is using them.</span></span>

### <a name="can-i-delete-my-legacy-api-key-or-discontinue-using-now"></a><span data-ttu-id="23de6-166">Můžete odstranit Moje starší verze klíč rozhraní API nebo můžete přestat používat nyní?</span><span class="sxs-lookup"><span data-stu-id="23de6-166">Can I delete my legacy API key or discontinue using now?</span></span>

<span data-ttu-id="23de6-167">Ano.</span><span class="sxs-lookup"><span data-stu-id="23de6-167">Yes.</span></span> <span data-ttu-id="23de6-168">Je možné – a pravděpodobně by měl – odstranit klíč rozhraní API starší verze.</span><span class="sxs-lookup"><span data-stu-id="23de6-168">You can--and you probably should--delete your legacy API key.</span></span>

### <a name="can-i-get-back-my-api-key-that-i-deleted-by-mistake"></a><span data-ttu-id="23de6-169">Získat zpět Můj klíč rozhraní API, který byl odstraněn omylem?</span><span class="sxs-lookup"><span data-stu-id="23de6-169">Can I get back my API key that I deleted by mistake?</span></span>

<span data-ttu-id="23de6-170">Ne.</span><span class="sxs-lookup"><span data-stu-id="23de6-170">No.</span></span> <span data-ttu-id="23de6-171">Po odstranění můžete pouze vytvářet nové klíče.</span><span class="sxs-lookup"><span data-stu-id="23de6-171">Once deleted, you can only create new keys.</span></span> <span data-ttu-id="23de6-172">Je možné omylem odstraněné klíče bez obnovení.</span><span class="sxs-lookup"><span data-stu-id="23de6-172">There is no recovery possible for accidentally deleted keys.</span></span>

### <a name="does-the-old-api-key-continue-to-work-upon-api-key-refresh"></a><span data-ttu-id="23de6-173">Dál starý klíč rozhraní API pro práci po aktualizaci klíče rozhraní API?</span><span class="sxs-lookup"><span data-stu-id="23de6-173">Does the old API key continue to work upon API key refresh?</span></span>

<span data-ttu-id="23de6-174">Ne.</span><span class="sxs-lookup"><span data-stu-id="23de6-174">No.</span></span> <span data-ttu-id="23de6-175">Po aktualizaci klíč se získá generovat nový klíč, který má stejný obor, oprávnění a vypršení platnosti jako měl ten starý.</span><span class="sxs-lookup"><span data-stu-id="23de6-175">Once you refresh a key, a new key gets generated that has the same scope, permission, and expiry as the old one.</span></span> <span data-ttu-id="23de6-176">Starý klíč přestane existovat.</span><span class="sxs-lookup"><span data-stu-id="23de6-176">The old key ceases to exist.</span></span>

### <a name="can-i-give-more-permissions-to-an-existing-api-key"></a><span data-ttu-id="23de6-177">Můžete udělit další oprávnění k existující klíč rozhraní API?</span><span class="sxs-lookup"><span data-stu-id="23de6-177">Can I give more permissions to an existing API key?</span></span>

<span data-ttu-id="23de6-178">Nelze měnit obor, ale můžete upravit seznam balíčků, které se vztahuje na.</span><span class="sxs-lookup"><span data-stu-id="23de6-178">You cannot modify the scope, but you can edit the package list it is applicable to.</span></span>

### <a name="how-do-i-know-if-any-of-my-keys-expired-or-are-getting-expired"></a><span data-ttu-id="23de6-179">Jak poznám, že pokud některé zkratky vypršela nebo získávání buď vypršela platnost?</span><span class="sxs-lookup"><span data-stu-id="23de6-179">How do I know if any of my keys expired or are getting expired?</span></span>

<span data-ttu-id="23de6-180">Pokud vyprší platnost libovolné klávesy, můžeme vám dá vědět prostřednictvím zprávu s upozorněním v horní části stránky.</span><span class="sxs-lookup"><span data-stu-id="23de6-180">If any key expires, we will let you know through a warning message at the top of the page.</span></span> <span data-ttu-id="23de6-181">Jsme také odeslat e-mailové upozornění pro vlastníka účtu deseti dnů před vypršením platnosti klíče tak, aby na něm může fungovat dobře předem.</span><span class="sxs-lookup"><span data-stu-id="23de6-181">We also send a warning e-mail to the account holder ten days before the expiration of the key so that you can act on it well in advance.</span></span>